CREATE TABLE  "MD_PROP" 
   (	"KD_PROP" VARCHAR2(12), 
	"NM_PROP" VARCHAR2(25) CONSTRAINT "NN_NM_PROP" NOT NULL ENABLE, 
	"KETERANGAN" VARCHAR2(75), 
	"KD_PROP_EPSBED" VARCHAR2(25), 
	 CONSTRAINT "PK_MD_PROP" PRIMARY KEY ("KD_PROP") ENABLE
   )
/

CREATE TABLE  "MD_KAB" 
   (	"KD_KAB" VARCHAR2(12), 
	"KD_PROP" VARCHAR2(12), 
	"NM_KAB" VARCHAR2(25) CONSTRAINT "NN_NM_KAB" NOT NULL ENABLE, 
	"KETERANGAN" VARCHAR2(75), 
	"KD_KAB_EPSBED" VARCHAR2(25), 
	 CONSTRAINT "PK_MD_KAB" PRIMARY KEY ("KD_KAB") ENABLE, 
	 CONSTRAINT "FK_MD_KAB_PROP" FOREIGN KEY ("KD_PROP")
	  REFERENCES  "MD_PROP" ("KD_PROP") ENABLE
   )
/


CREATE TABLE  "MD_KEC" 
   (	"KD_KEC" VARCHAR2(12), 
	"KD_KAB" VARCHAR2(12), 
	"NM_KEC" VARCHAR2(25) CONSTRAINT "NN_NM_KEC" NOT NULL ENABLE, 
	"KETERANGAN" VARCHAR2(75), 
	"KD_KEC_EPSBED" VARCHAR2(25), 
	 CONSTRAINT "PK_MD_KEC" PRIMARY KEY ("KD_KEC") ENABLE, 
	 CONSTRAINT "FK_MD_KEC_KAB" FOREIGN KEY ("KD_KAB")
	  REFERENCES  "MD_KAB" ("KD_KAB") ENABLE
   )
/



CREATE TABLE  "KKN_DPL" 
   (	"ID_DOSEN" NUMBER, 
	"KD_DOSEN" VARCHAR2(12), 
	"NM_DOSEN" VARCHAR2(75) CONSTRAINT "NN_NM_DOSEN" NOT NULL ENABLE, 
	"NIP" VARCHAR2(50),
	"MOBILE" VARCHAR2(25), 
	"ALMT_RUMAH" VARCHAR2(75), 
	"RT" VARCHAR2(50), 
	"DESA" VARCHAR2(50), 
	"KD_PROP" VARCHAR2(12), 
	"KD_KAB" VARCHAR2(12), 
	"KD_KEC" VARCHAR2(12), 
	"TELP_RUMAH" VARCHAR2(25), 
	"PATH_TTD" VARCHAR2(150),
	 CONSTRAINT "PK_D_DOSEN" PRIMARY KEY ("ID_DOSEN") ENABLE, 
	 CONSTRAINT kkn_kd_dosen_unik UNIQUE (KD_DOSEN),
	 CONSTRAINT "FK_D_DOSEN_KAB_RMH" FOREIGN KEY ("KD_KAB")
	  REFERENCES  "MD_KAB" ("KD_KAB") ENABLE, 
	 CONSTRAINT "FK_D_DOSEN_KEC_RMH" FOREIGN KEY ("KD_KEC")
	  REFERENCES  "MD_KEC" ("KD_KEC") ENABLE, 
	 CONSTRAINT "FK_D_DOSEN_PROP_RMH" FOREIGN KEY ("KD_PROP")
	  REFERENCES  "MD_PROP" ("KD_PROP") ENABLE
   )
/


CREATE TABLE KKN_MHS(
NO							NUMBER,
NIM							VARCHAR2(12) NOT NULL,
NAMA							VARCHAR2(75),
JK							VARCHAR2(15),
GOL_DARAH						VARCHAR2(5),
TINGGI							NUMBER,
BERAT							NUMBER,
PEKERJAAN						VARCHAR2(75),
STATUS_KAWIN						CHAR(1),
FAK							VARCHAR2(75),
PRODI							VARCHAR2(75),
ALAMAT_RUMAH						VARCHAR2(75),	
RT_RUMAH						VARCHAR2(25),	
DESA_RUMAH						VARCHAR2(25),	
NM_KEC_RUMAH						VARCHAR2(25),	
NM_KAB_RUMAH						VARCHAR2(25),
NM_PROP_RUMAH						VARCHAR2(25),
HP_MHS							VARCHAR2(75),	
ALAMAT_JOGJA						VARCHAR2(75),	
RT_JOGJA						VARCHAR2(25),	
DESA_JOGJA						VARCHAR2(75),	
NM_KEC_JOGJA						VARCHAR2(75),	
NM_KAB_JOGJA						VARCHAR2(75),	
TELP_MHS						VARCHAR2(25),
PRESTASI 						VARCHAR2(75),
TRANSPORTASI						VARCHAR2(75),
PATH_FOTO	                                    	VARCHAR2(150),
PATH_SK_DOKTER                                     	VARCHAR2(150),
PATH_SK_GOLONGAN_DARAH                             	VARCHAR2(150),
PATH_SK_CUTI                                       	VARCHAR2(150),
PATH_SK_TIDAK_HAMIL                                	VARCHAR2(150),
NILAI							NUMBER,
NILAI_HURUF						CHAR(1),
SUDAH							CHAR(1),  
CONSTRAINT kkn_mhs_pk PRIMARY KEY(NO),
CONSTRAINT "CC_MHS_GOL_DARAH" CHECK (GOL_DARAH IN ('A','B','AB','O')) ENABLE, 
CONSTRAINT "CC_KAWIN_MHS" CHECK (STATUS_KAWIN IN ('K','B','J','D')) ENABLE, 
CONSTRAINT kkn_nim_unik UNIQUE (NIM));


 
CREATE TABLE KKN_TA(
ID_TA 								NUMBER,
TA     								VARCHAR2(15),
CONSTRAINT ta_unique UNIQUE (TA),
CONSTRAINT kkn_ta_pk PRIMARY KEY(ID_TA));


CREATE TABLE KKN_PERIODE(
ID_PERIODE										NUMBER,
PERIODE											VARCHAR2(15),
TANGGAL_MULAI										DATE,
TANGGAL_SELESAI										DATE,
ID_TA												NUMBER,
CONSTRAINT kkn_periode_pk PRIMARY KEY(ID_PERIODE),
CONSTRAINT periode_kkn_fk_ta FOREIGN KEY(ID_TA) REFERENCES KKN_TA(ID_TA)
);

CREATE TABLE KKN_ANGKATAN(
ID_ANGKATAN											NUMBER,
ANGKATAN											VARCHAR(12),
SK_SERTIFIKAT											VARCHAR(75),
ID_TA												NUMBER,
ID_PERIODE											NUMBER,
KD_DOSEN                                           						VARCHAR2(12),
CONSTRAINT kkn_angkatan_pk PRIMARY KEY(ID_ANGKATAN),	
CONSTRAINT angkatan_unique UNIQUE (ANGKATAN),
CONSTRAINT angkatan_kkn_fk_ta FOREIGN KEY(ID_TA) REFERENCES KKN_TA(ID_TA),
CONSTRAINT ketupat_kkn_fk FOREIGN KEY(KD_DOSEN) REFERENCES KKN_DPL(KD_DOSEN),
CONSTRAINT angkatan_kkn_fk_periode FOREIGN KEY(ID_PERIODE) REFERENCES KKN_PERIODE(ID_PERIODE));

 
CREATE TABLE KKN_KELOMPOK(
 ID_KELOMPOK						NUMBER,
 NAMA_KELOMPOK                                          VARCHAR2(50),
 ID_ANGKATAN						NUMBER,										
 ID_DOSEN                                           	NUMBER,
 RW							VARCHAR2(12),
 DESA							VARCHAR2(50),
 KD_KEC							VARCHAR2(12),
 KD_KAB							VARCHAR2(12),
 KD_PROP						VARCHAR2(12),
 CONSTRAINT kelompok_pk PRIMARY KEY(ID_KELOMPOK),
 CONSTRAINT kkn_kelompok_unik UNIQUE (NAMA_KELOMPOK),
 CONSTRAINT dpl_kelompok_fk FOREIGN KEY (ID_DOSEN) REFERENCES KKN_DPL(ID_DOSEN),
 CONSTRAINT angkatan_kkn_fk FOREIGN KEY (ID_ANGKATAN) REFERENCES KKN_ANGKATAN(ID_ANGKATAN),
 CONSTRAINT kec_lokasi_kelompok_fk FOREIGN KEY (KD_KEC) REFERENCES MD_KEC(KD_KEC),
 CONSTRAINT kab_lokasi_kelompok_fk FOREIGN KEY (KD_KAB) REFERENCES MD_KAB(KD_KAB),
 CONSTRAINT prop_lokasi_kelompok_fk FOREIGN KEY (KD_PROP) REFERENCES MD_PROP(KD_PROP));
 

 
 
CREATE TABLE KKN_DETAIL_KELOMPOK(
 ID_DETAIL_KELOMPOK						NUMBER,
 ID_KELOMPOK                                           		NUMBER,
 NO                                           			NUMBER,
 CONSTRAINT detail_kelompok_pk PRIMARY KEY(ID_DETAIL_KELOMPOK),
 CONSTRAINT nim_mahasiswa_fk FOREIGN KEY(NO) REFERENCES KKN_MHS(NO),
 CONSTRAINT kelompok_detail_fk FOREIGN KEY (ID_KELOMPOK) REFERENCES KKN_KELOMPOK(ID_KELOMPOK));
 
 


 
CREATE TABLE  "KKN_ADMIN" (
	"ID" NUMBER,
	"USERNAME" VARCHAR2(100), 
	"PSW" VARCHAR2(100), 
	"NAMA" VARCHAR2(100), 
	"STATUS" VARCHAR2(50), 
	"IDLINK" VARCHAR2(10), 
	 CONSTRAINT "pk_admin_kkn" PRIMARY KEY ("ID") ENABLE,
	 CONSTRAINT "admin_username_unique" UNIQUE ("USERNAME") NOT NULL ENABLE
   );

   
 CREATE TABLE KKN_FAK(
 KD_FAK								VARCHAR2(5),
 NM_FAK                                           		VARCHAR2(75),
 CONSTRAINT kkn_fak_pk PRIMARY KEY(KD_FAK));
 
 CREATE TABLE KKN_MATKUL(
 ID								NUMBER,
 KD_MK								VARCHAR2(50),
 KD_FAK                                           		VARCHAR2(5),
 CONSTRAINT kkn_mk_pk PRIMARY KEY(ID),
 CONSTRAINT kd_mk_kkn_unique UNIQUE (KD_MK),
 CONSTRAINT kkn_kd_fak_fk FOREIGN KEY(KD_FAK) REFERENCES KKN_FAK(KD_FAK));
 

   