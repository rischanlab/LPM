<?phpclass Form extends CI_Controller  {	function __construct()	{		parent::__construct();		$this->load->helper(array('form','url', 'text_helper','date'));		//$this->load->database();		$this->load->library(array('form_validation','session'));		$this->form_data= new stdClass();		session_start();	}	//fungsi mengecek apakah sistem ini diakses melalui SIA atau tidak	function cek_akses_sistem($status){		if ($status){			return true;		}else{			return false;		}	}	// fungsi untuk mengecek user mahasiswa yang login, 1= mahasiswa	function login_mhs($status2){		//echo"$status2";		if ($status2=='1'){		return true;	}else{		return false;	}	}	// fungsi untuk mengecek user dosen yang login, 2= dosen	function login_dosen($status2){		if ($status2=='2'){			return true;		}else{			return false;		}	}		function cek_masa_kkn(){		// return 1 jika pada masa krs else 0			$this->db = $this->load->database('kkn', TRUE);			$this->load->model('Form_Model','',TRUE);			$cek_aktif_kkn	= $this->Form_Model->cek_waktu_kkn();			foreach($cek_aktif_kkn->result() as $wktu){				$date1	= $wktu->FIRST_DATE;				$date2	= $wktu->LAST_DATE;			}						$date_now				= date('m/d/Y');			$sekarang 				= DateTime::createFromFormat('m/d/Y', $date_now);			$mulai_daftar		 	= DateTime::createFromFormat('m/d/Y', $date1);			$selesai_daftar		 	= DateTime::createFromFormat('m/d/Y', $date2);						if ($sekarang >= $mulai_daftar && $sekarang <= $selesai_daftar){				return 1;			}else {				return 0;						}		}		function cek_sudah_ke_poli($nim){		$this->db = $this->load->database('poli', TRUE);		$this->load->model('Form_Model','',TRUE);		$hasil=$this->Form_Model->cek_sudah_poli($nim);		if (count($hasil->result_array())>0){			return 1;		}else {			return 0;		}		}		function cek_input_kkn($nim){		// return 1 jika sudah input kkn pada smt aktif tsb			}		function cek_bayar_kkn($nim){		//return 1 jika sudah bayar dan langsung redirect ke form/index	}		function index(){		echo "<meta http-equiv='refresh' content='0; url=http://sia.uin-suka.ac.id'>";	}			function kkn($nimenkrip)	{					$nim=base64_decode($nimenkrip);			if (strlen($nim)==8){							$_SESSION['data']['status']=1;							$kd_fak=substr($nim,2,1);							if($kd_fak=='6'){								$this->db = $this->load->database('saintek', TRUE);								$this->load->model('Form_Model','',TRUE);								$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();								$_SESSION['data']['id_user']=$mahasiswa->NIM;								$_SESSION['data']['nm_user']=$mahasiswa->NAMA;								$_SESSION['data']['nm_prodi']=$mahasiswa->NM_PRODI;																				}else if($kd_fak=='1'){															$this->db = $this->load->database('adab', TRUE);								$this->load->model('Form_Model','',TRUE);								$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();								$_SESSION['data']['id_user']=$mahasiswa->NIM;								$_SESSION['data']['nm_user']=$mahasiswa->NAMA;								$_SESSION['data']['nm_prodi']=$mahasiswa->NM_PRODI;																											}else if($kd_fak=='2'){															$this->db = $this->load->database('dakwah', TRUE);								$this->load->model('Form_Model','',TRUE);								$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();								$_SESSION['data']['id_user']=$mahasiswa->NIM;								$_SESSION['data']['nm_user']=$mahasiswa->NAMA;								$_SESSION['data']['nm_prodi']=$mahasiswa->NM_PRODI;																										}else if($kd_fak=='3'){															$this->db = $this->load->database('syariah', TRUE);								$this->load->model('Form_Model','',TRUE);								$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();								$_SESSION['data']['id_user']=$mahasiswa->NIM;								$_SESSION['data']['nm_user']=$mahasiswa->NAMA;								$_SESSION['data']['nm_prodi']=$mahasiswa->NM_PRODI;																									}else if($kd_fak=='4'){																$this->db = $this->load->database('tarbiyah', TRUE);								$this->load->model('Form_Model','',TRUE);								$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();								$_SESSION['data']['id_user']=$mahasiswa->NIM;								$_SESSION['data']['nm_user']=$mahasiswa->NAMA;								$_SESSION['data']['nm_prodi']=$mahasiswa->NM_PRODI;																											}else if($kd_fak=='5'){															$this->db = $this->load->database('ushuludin', TRUE);								$this->load->model('Form_Model','',TRUE);								$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();								$_SESSION['data']['id_user']=$mahasiswa->NIM;								$_SESSION['data']['nm_user']=$mahasiswa->NAMA;								$_SESSION['data']['nm_prodi']=$mahasiswa->NM_PRODI;																						}else if($kd_fak=='7'){															$this->db = $this->load->database('soshum', TRUE);								$this->load->model('Form_Model','',TRUE);								$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();								$_SESSION['data']['id_user']=$mahasiswa->NIM;								$_SESSION['data']['nm_user']=$mahasiswa->NAMA;								$_SESSION['data']['nm_prodi']=$mahasiswa->NM_PRODI;																										}else if($kd_fak=='8'){															$this->db = $this->load->database('febi', TRUE);								$this->load->model('Form_Model','',TRUE);								$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();								$_SESSION['data']['id_user']=$mahasiswa->NIM;								$_SESSION['data']['nm_user']=$mahasiswa->NAMA;								$_SESSION['data']['nm_prodi']=$mahasiswa->NM_PRODI;																										}else {											?>											<script type="text/javascript">											alert("Anda tidak dapat mengakses secara langsung, anda harus login melalui sia..!!!");												window.location = "http://sia.uin-suka.ac.id/"											</script>								<?php																								}											//cek poli						$cek_poli=$this->cek_sudah_ke_poli($nim);						if($cek_poli==1){								$this->db = $this->load->database('kkn', TRUE);								$this->load->model('Form_Model');								$hasil=$this->Form_Model->cek_sudah($nim);								if (count($hasil->result_array())>0){									foreach($hasil->result() as $items){										$sudah=$items->SUDAH;									}									if($sudah=='0'){										$kd_fak=substr($nim,2,1);										if($kd_fak=='6'){											$masa_kkn=$this->cek_masa_kkn();											if($masa_kkn==1){												$this->db = $this->load->database('saintek', TRUE);												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																				}else if($kd_fak=='1'){																					if($masa_kkn==1){												$this->db = $this->load->database('adab', TRUE);												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																				}else if($kd_fak=='2'){																					if($masa_kkn==1){												$this->db = $this->load->database('dakwah', TRUE);												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																				}else if($kd_fak=='3'){																				if($masa_kkn==1){												$this->db = $this->load->database('syariah', TRUE);												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																				}else if($kd_fak=='4'){																						if($masa_kkn==1){												$this->db = $this->load->database('tarbiyah', TRUE);												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																				}else if($kd_fak=='5'){																					if($masa_kkn==1){												$this->db = $this->load->database('ushuludin', TRUE);												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																				}else if($kd_fak=='7'){																					if($masa_kkn==1){												$this->db = $this->load->database('soshum', TRUE);												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																				}else if($kd_fak=='8'){																					if($masa_kkn==1){												$this->db = $this->load->database('febi', TRUE);												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																				}else {										?>							<script type="text/javascript">										alert("Nim Anda Tidak terdaftar..!!!");											window.location = "http://sia.uin-suka.ac.id/"										</script>							<?php																													}									}									else if ($sudah=='1'){										echo "<meta http-equiv='refresh' content='0; url=".base_url()."form/upload'>";									}									else {																					echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php/mahasiswa'>";									}								}								else{										$masa_kkn=$this->cek_masa_kkn();											if($masa_kkn==1){												$this->load->view('form/index');											}else {													?>												<script type="text/javascript">												alert("Bukan Masa Pendaftaran KKN..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php											}																	}													}else{						?>										<script type="text/javascript">										alert("Data kesehatan Anda Belum diinputkan oleh Poliklinik UIN Sunan Kalijaga, Silahkan Anda datang ke Poliklinik UIN Sunan Kalijaga untuk pemeriksaan kesehatan dan meminta petugas Poliklinik untuk menginputkan data anda ke sistem KKN!!!! ");											window.location = "http://sia.uin-suka.ac.id/"										</script>							<?php												}														}else if(strlen($nim)==9) {					$_SESSION['data']['status']=2;					$_SESSION['data']['id_user']=$nim;					$this->db = $this->load->database('kkn', TRUE);					$this->load->model('Form_Model','',TRUE);					$dosen = $this->Form_Model->get_data_dosen($nim);					if (count($dosen->result_array())>0){						foreach($dosen->result() as $items){							$nama_dosen=$items->NM_DOSEN;						}					}else {													?>												<script type="text/javascript">												alert("Anda Belum Pernah Menjadi Dosen Pembimbing Lapangan..!!!");													window.location = "http://sia.uin-suka.ac.id/"												</script>												<?php																		}					$_SESSION['data']['nm_user']=$nama_dosen;					echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php/dosen'>";									}else {					$_SESSION['data']['status']=0;					echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php'>";				}	}	function submit()	{		$username = $this->input->post('usernameteks');		$pwd = $this->input->post('passwordteks');		$this->load->model('Kkn_model');		$hasil = $this->Kkn_model->Data_Login($username,$pwd);		if (count($hasil->result_array())>0){			foreach($hasil->result() as $items){				$session_username=$items->username."|".$items->nama."|".$items->idlink."|".$items->status;				$tanda=$items->status;			}			$_SESSION['username_belajar']=$session_username;			if($tanda=="Mahasiswa"){				echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php/'>";			}			else if($tanda=="admin"){				echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php/admin'>";			}			else {				echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php/dosen'>";			}		}		else{			?><script type="text/javascript">			alert("Username atau Password Yang Anda Masukkan Salah..!!!");						</script><?phpecho "<meta http-equiv='refresh' content='0; url=".base_url()."'>";		}	}	function input(){		$nim =$_SESSION['data']['id_user'];		$this->form_validation->set_rules('agreeCheck', 'Agree to the Terms and Conditions', 'required|isset');		if (!isset($_POST['agreeCheck'])) {			?><script type="text/javascript">			alert("Anda Tidak Setuju dengan Pernyataan ini, anda tidak berhak menuju ke halaman selanjutnya..!!!");				window.location ="<?php echo base_url(); ?>form"			</script><?php		}else {			$this->db = $this->load->database('kkn', TRUE);			$this->load->model('Form_Model','',TRUE);			$kd_fak=substr($nim,2,1);			if($kd_fak=='6'){				$this->db = $this->load->database('saintek', TRUE);				$this->load->model('Form_Model','',TRUE);				$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();				$this->form_data->NIM = $mahasiswa->NIM;;				$this->form_data->NAMA = $mahasiswa->NAMA;				$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;				$this->form_data->KD_FAK = $mahasiswa->KD_FAK;				$this->form_data->NM_FAK = $mahasiswa->NM_FAK;				$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;				$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;				$this->form_data->HP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;				$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;				$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;				$this->form_data->TINGGI = $mahasiswa->TINGGI;									$this->form_data->BERAT = $mahasiswa->BERAT;				$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;				$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;									$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;				$this->form_data->RT = $mahasiswa->RT;				$this->form_data->DESA = $mahasiswa->DESA;				$this->form_data->NM_KEC = $mahasiswa->NM_KEC;				$this->form_data->NM_KAB = $mahasiswa->NM_KAB;				$this->form_data->NM_PROP = $mahasiswa->NM_PROP;										}			else if ($kd_fak=='3'){				$this->db = $this->load->database('syariah', TRUE);				$this->load->model('Form_Model','',TRUE);				$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();				$this->form_data->NIM = $mahasiswa->NIM;;				$this->form_data->NAMA = $mahasiswa->NAMA;				$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;				$this->form_data->KD_FAK = $mahasiswa->KD_FAK;				$this->form_data->NM_FAK = $mahasiswa->NM_FAK;				$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;				$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;				$this->form_data->HP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;				$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;				$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;				$this->form_data->TINGGI = $mahasiswa->TINGGI;									$this->form_data->BERAT = $mahasiswa->BERAT;				$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;				$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;									$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;				$this->form_data->RT = $mahasiswa->RT;				$this->form_data->DESA = $mahasiswa->DESA;				$this->form_data->NM_KEC = $mahasiswa->NM_KEC;				$this->form_data->NM_KAB = $mahasiswa->NM_KAB;				$this->form_data->NM_PROP = $mahasiswa->NM_PROP;												}			else if ($kd_fak=='5'){				$this->db = $this->load->database('ushuludin', TRUE);				$this->load->model('Form_Model','',TRUE);				$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();				$this->form_data->NIM = $mahasiswa->NIM;;				$this->form_data->NAMA = $mahasiswa->NAMA;				$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;				$this->form_data->KD_FAK = $mahasiswa->KD_FAK;				$this->form_data->NM_FAK = $mahasiswa->NM_FAK;				$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;				$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;				$this->form_data->HP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;				$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;				$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;				$this->form_data->TINGGI = $mahasiswa->TINGGI;									$this->form_data->BERAT = $mahasiswa->BERAT;				$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;				$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;									$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;				$this->form_data->RT = $mahasiswa->RT;				$this->form_data->DESA = $mahasiswa->DESA;				$this->form_data->NM_KEC = $mahasiswa->NM_KEC;				$this->form_data->NM_KAB = $mahasiswa->NM_KAB;				$this->form_data->NM_PROP = $mahasiswa->NM_PROP;												}			else if ($kd_fak=='1'){				$this->db = $this->load->database('adab', TRUE);				$this->load->model('Form_Model','',TRUE);				$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();				$this->form_data->NIM = $mahasiswa->NIM;;				$this->form_data->NAMA = $mahasiswa->NAMA;				$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;				$this->form_data->KD_FAK = $mahasiswa->KD_FAK;				$this->form_data->NM_FAK = $mahasiswa->NM_FAK;				$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;				$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;				$this->form_data->HP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;				$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;				$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;				$this->form_data->TINGGI = $mahasiswa->TINGGI;									$this->form_data->BERAT = $mahasiswa->BERAT;				$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;				$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;									$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;				$this->form_data->RT = $mahasiswa->RT;				$this->form_data->DESA = $mahasiswa->DESA;				$this->form_data->NM_KEC = $mahasiswa->NM_KEC;				$this->form_data->NM_KAB = $mahasiswa->NM_KAB;				$this->form_data->NM_PROP = $mahasiswa->NM_PROP;					}			else if ($kd_fak=='4'){				$this->db = $this->load->database('tarbiyah', TRUE);				$this->load->model('Form_Model','',TRUE);				$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();				$this->form_data->NIM = $mahasiswa->NIM;;				$this->form_data->NAMA = $mahasiswa->NAMA;				$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;				$this->form_data->KD_FAK = $mahasiswa->KD_FAK;				$this->form_data->NM_FAK = $mahasiswa->NM_FAK;				$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;				$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;				$this->form_data->HP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;				$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;				$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;				$this->form_data->TINGGI = $mahasiswa->TINGGI;									$this->form_data->BERAT = $mahasiswa->BERAT;				$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;				$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;									$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;				$this->form_data->RT = $mahasiswa->RT;				$this->form_data->DESA = $mahasiswa->DESA;				$this->form_data->NM_KEC = $mahasiswa->NM_KEC;				$this->form_data->NM_KAB = $mahasiswa->NM_KAB;				$this->form_data->NM_PROP = $mahasiswa->NM_PROP;								}			else if ($kd_fak=='2'){				$this->db = $this->load->database('dakwah', TRUE);				$this->load->model('Form_Model','',TRUE);				$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();				$this->form_data->NIM = $mahasiswa->NIM;;				$this->form_data->NAMA = $mahasiswa->NAMA;				$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;				$this->form_data->KD_FAK = $mahasiswa->KD_FAK;				$this->form_data->NM_FAK = $mahasiswa->NM_FAK;				$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;				$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;				$this->form_data->HP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;				$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;				$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;				$this->form_data->TINGGI = $mahasiswa->TINGGI;									$this->form_data->BERAT = $mahasiswa->BERAT;				$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;				$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;									$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;				$this->form_data->RT = $mahasiswa->RT;				$this->form_data->DESA = $mahasiswa->DESA;				$this->form_data->NM_KEC = $mahasiswa->NM_KEC;				$this->form_data->NM_KAB = $mahasiswa->NM_KAB;				$this->form_data->NM_PROP = $mahasiswa->NM_PROP;								}			else if ($kd_fak=='7'){				$this->db = $this->load->database('soshum', TRUE);				$this->load->model('Form_Model','',TRUE);				$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();				$this->form_data->NIM = $mahasiswa->NIM;;				$this->form_data->NAMA = $mahasiswa->NAMA;				$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;				$this->form_data->KD_FAK = $mahasiswa->KD_FAK;				$this->form_data->NM_FAK = $mahasiswa->NM_FAK;				$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;				$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;				$this->form_data->HP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;				$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;				$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;				$this->form_data->TINGGI = $mahasiswa->TINGGI;									$this->form_data->BERAT = $mahasiswa->BERAT;				$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;				$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;									$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;				$this->form_data->RT = $mahasiswa->RT;				$this->form_data->DESA = $mahasiswa->DESA;				$this->form_data->NM_KEC = $mahasiswa->NM_KEC;				$this->form_data->NM_KAB = $mahasiswa->NM_KAB;				$this->form_data->NM_PROP = $mahasiswa->NM_PROP;								}			else if ($kd_fak=='8'){				$this->db = $this->load->database('febi', TRUE);				$this->load->model('Form_Model','',TRUE);				$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();				$this->form_data->NIM = $mahasiswa->NIM;;				$this->form_data->NAMA = $mahasiswa->NAMA;				$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;				$this->form_data->KD_FAK = $mahasiswa->KD_FAK;				$this->form_data->NM_FAK = $mahasiswa->NM_FAK;				$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;				$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;				$this->form_data->HP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;				$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;				$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;				$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;				$this->form_data->TINGGI = $mahasiswa->TINGGI;									$this->form_data->BERAT = $mahasiswa->BERAT;				$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;				$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;									$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;				$this->form_data->RT = $mahasiswa->RT;				$this->form_data->DESA = $mahasiswa->DESA;				$this->form_data->NM_KEC = $mahasiswa->NM_KEC;				$this->form_data->NM_KAB = $mahasiswa->NM_KAB;				$this->form_data->NM_PROP = $mahasiswa->NM_PROP;								}			else{						?>		<script type="text/javascript">					alert("Nim Anda Tidak terdaftar..!!!");						window.location = "http://sia.uin-suka.ac.id/"					</script>		<?php						}		}	$this->load->view('form/input');		}	function insert(){		$nim =$_SESSION['data']['id_user'];		$kd_mk =$_SESSION['data']['kd_mk'];		$this->db = $this->load->database('kkn', TRUE);			$this->load->model('Form_Model','',TRUE);			$hasil_mk=$this->Form_Model->cek_mk($kd_mk);			if (count($hasil_mk->result_array())>0){				foreach($hasil_mk->result() as $items){				$ada=$items->KD_FAK;				}				if($ada=='06'){				$this->db = $this->load->database('saintek', TRUE);				}				else if($ada=='03'){				$this->db = $this->load->database('syariah', TRUE);				}			}else {				$this->load->view('form/index');						}						$this->load->model('Form_Model','',TRUE);		$mahasiswa = $this->Form_Model->get_data_from_db_sia($nim)->row();		$this->form_data->NIM = $mahasiswa->NIM;;		$this->form_data->NAMA = $mahasiswa->NAMA;		$this->form_data->ANGKATAN = $mahasiswa->ANGKATAN;		$this->form_data->KD_FAK = $mahasiswa->KD_FAK;		$this->form_data->NM_FAK = $mahasiswa->NM_FAK;		$this->form_data->NM_PRODI = $mahasiswa->NM_PRODI;		$this->form_data->J_KELAMIN = $mahasiswa->J_KELAMIN;		$this->form_data->HP_MHS = $mahasiswa->HP_MHS;		$this->form_data->TELP_MHS = $mahasiswa->HP_MHS;		$this->form_data->TMP_LAHIR = $mahasiswa->TMP_LAHIR;		$this->form_data->TGL_LAHIR = $mahasiswa->TGL_LAHIR;		$this->form_data->GOL_DARAH = $mahasiswa->GOL_DARAH;		$this->form_data->TINGGI = $mahasiswa->TINGGI;					$this->form_data->BERAT = $mahasiswa->BERAT;		$this->form_data->PEKERJAAN = $mahasiswa->PEKERJAAN;		$this->form_data->STATUS_KAWIN = $mahasiswa->STATUS_KAWIN;					$this->form_data->ALAMAT_MHS = $mahasiswa->ALAMAT_MHS;		$this->form_data->RT = $mahasiswa->RT;		$this->form_data->DESA = $mahasiswa->DESA;		$this->form_data->NM_KEC = $mahasiswa->NM_KEC;		$this->form_data->NM_KAB = $mahasiswa->NM_KAB;		$this->form_data->NM_PROP = $mahasiswa->NM_PROP;						$this->load->library('form_validation');		$this->form_validation->set_rules('transportasi', 'Transportasi', 'required');		$this->form_validation->set_rules('prestasi', 'Keahlian', 'required');		$this->form_validation->set_rules('alamat_jogja', 'Alamat Jogja', 'required');		//$this->form_validation->set_rules('rt_jogja', 'RT Jogja', 'required');		$this->form_validation->set_rules('desa_jogja', 'Desa Jogja', 'required');		$this->form_validation->set_rules('nm_kec_jogja', 'Kecamatan Jogja', 'required');		$this->form_validation->set_rules('nm_kab_jogja', 'Kabupaten Jogja', 'required');		$this->form_validation->set_rules('hp_mhs', 'No HP Mahasiswa', 'required');		$this->form_validation->set_rules('telp_mhs', 'Telp Ibu/Bpk dari Mahasiswa', 'required');		$this->form_validation->set_rules('gol_darah', 'Golongan Darah', 'required');		$this->form_validation->set_rules('tinggi', 'Tinggi', 'required');		$this->form_validation->set_rules('berat', 'Berat', 'required');		$this->form_validation->set_rules('pekerjaan', 'Pekerjaan', 'required');		$this->form_validation->set_rules('STATUS_KAWIN', 'Status Pernikahan', 'required');		$this->form_validation->set_message('required', 'Field %s tidak boleh kosong!!!');		if ($this->form_validation->run() == FALSE)		{			$this->load->view('form/input');		}		else		{	$this->db = $this->load->database('kkn', TRUE);			$this->load->model('Form_Model','',TRUE);			$mhs = array( 	'NAMA' => $this->input->post('nama',TRUE),					'NIM' => $this->input->post('nim',TRUE),					'FAK' => $this->input->post('fak'),					'PRODI' => $this->input->post('prodi'),					'JK' => $this->input->post('j_kelamin',TRUE),					'HP_MHS' => $this->input->post('hp_mhs'),					'TTL' => $this->input->post('ttl'),					'GOL_DARAH' => $this->input->post('gol_darah'),					'TINGGI' => $this->input->post('tinggi'),					'BERAT' => $this->input->post('berat'),					'PEKERJAAN' => $this->input->post('pekerjaan'),					'STATUS_KAWIN' => $this->input->post('STATUS_KAWIN',TRUE),					'PRESTASI ' => $this->input->post('prestasi',TRUE),					'TRANSPORTASI' => $this->input->post('transportasi',TRUE),					'ALAMAT_RUMAH' => $this->input->post('alamat_mhs'),					'RT_RUMAH' => $this->input->post('rt'),					'DESA_RUMAH' => $this->input->post('desa'),					'NM_KEC_RUMAH' => $this->input->post('nm_kec'),					'NM_KAB_RUMAH' => $this->input->post('nm_kab'),					'NM_PROP_RUMAH' => $this->input->post('nm_prop'),					'TELP_MHS' => $this->input->post('telp_mhs'),					'ALAMAT_JOGJA' => $this->input->post('alamat_jogja',TRUE),					'RT_JOGJA' => $this->input->post('rt_jogja'),					'DESA_JOGJA' => $this->input->post('desa_jogja'),					'NM_KEC_JOGJA' => $this->input->post('nm_kec_jogja'),					'NM_KAB_JOGJA' => $this->input->post('nm_kab_jogja'),					'PATH_FOTO' => $this->input->post(''),					'PATH_SK_DOKTER' => $this->input->post(''),					'PATH_SK_GOLONGAN_DARAH' => $this->input->post(''),					'PATH_SK_CUTI' =>$this->input->post(''),					'PATH_SK_TIDAK_HAMIL' =>$this->input->post(''),						);							$this->Form_Model->insert_data_to_kkn_mhs($mhs);			$this->Form_Model->ganti_sudah_jadi_1($nim);			echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php/form/upload'>";										}										}	function upload()	{	//$nim =$_SESSION['data']['id_user'];		$this->load->view('form/doc_upload');	}	function foto($file)	{		if ($file == '')		{			$this->form_validation->set_message('foto', 'The %s field can not empty');			return FALSE;		}		else		{			return TRUE;		}	}function do_upload()	{		$this->db = $this->load->database('kkn', TRUE);		$this->load->model('Form_Model','',TRUE);		if (isset($_FILES['foto']['name']) && $_FILES['foto']['name'] != '') {		$nim =$_SESSION['data']['id_user'];		$pemilik=$nim;		//$pemisah="_";		$bersih=$_FILES['foto']['name'];		$nm=str_replace(" ","_","$bersih");		$pisah=explode(".",$nm);		$nama_murni=$pisah[0];		$ekstensi=$pisah[1];		$sp="_";		//$ubah=$pemilik.$sp.$nama_murni; //tanpa ekstensi		$ubah=$pemilik;		//path where to save the image		$config['upload_path'] = './uploads/foto';		$config['allowed_types'] = 'gif|jpg|png|jpeg|GIF|JPG|JPEG|GIF';		$config['max_size'] = '20048';		$config['overwrite'] = TRUE;		$config['max_width'] = '10024';		$config['max_height'] = '7068';		$config['remove_spaces'] = TRUE;		$config["file_name"]=$ubah; //dengan eekstensi		$foto=$ubah.".".$ekstensi;		$this->load->library('upload', $config);		$this->load->model('Form_Model','',TRUE);		$this->Form_Model->insert_foto($nim,$foto);		if (!$this->upload->do_upload('foto')) {			//echo $this->upload->display_errors();		//	$error = array('error' => $this->upload->display_errors());		//	$this->load->view('form/doc_upload', $error);			$foto_sukses = FALSE;		} else {			$foto_sukses = TRUE;		}	} else {				}			//upload SK Sehat	if (isset($_FILES['sk_sehat']['name']) && $_FILES['sk_sehat']['name'] != '') {		unset($config);		$nim =$_SESSION['data']['id_user'];		$pemilik=$nim;		//$pemisah="_";		$bersih=$_FILES['sk_sehat']['name'];		$nm=str_replace(" ","_","$bersih");		$pisah=explode(".",$nm);		$nama_murni=$pisah[0];		$ekstensi=$pisah[1];		$sp="_";		//$ubah=$pemilik.$sp.$nama_murni; //tanpa ekstensi		$ubah=$pemilik;		//path where to save the SkSehat		$configSkSehat['upload_path'] = './uploads/sk_sehat';		$configSkSehat['max_size'] = '10240';		$configSkSehat['allowed_types'] = 'pdf|jpg|png|JPG|JPEG|PNG|jpeg|doc|docx';		$configSkSehat['overwrite'] = TRUE;		$configSkSehat['remove_spaces'] = TRUE;		$configSkSehat["file_name"]=$ubah; //dengan eekstensi		$sk_sehat = $ubah.".".$ekstensi;		$this->load->library('upload', $configSkSehat);		$this->upload->initialize($configSkSehat);		$this->load->model('Form_Model','',TRUE);		$this->Form_Model->insert_sk_sehat($nim,$sk_sehat);		if (!$this->upload->do_upload('sk_sehat')) {			$sk_sehat_sukses = FALSE;		} else {			$sk_sehat_sukses=TRUE;		}	}					//upload SK Gologan Darah	if (isset($_FILES['sk_gol_darah']['name']) && $_FILES['sk_gol_darah']['name'] != '') {		unset($config);		$nim =$_SESSION['data']['id_user'];		$pemilik=$nim;		//$pemisah="_";		$bersih=$_FILES['sk_gol_darah']['name'];		$nm=str_replace(" ","_","$bersih");		$pisah=explode(".",$nm);		$nama_murni=$pisah[0];		$ekstensi=$pisah[1];		$sp="_";		//$ubah=$pemilik.$sp.$nama_murni; //tanpa ekstensi		$ubah=$pemilik;		//path where to save the SkGolDarah		$configSkGolDarah['upload_path'] = './uploads/sk_gol_darah';		$configSkGolDarah['max_size'] = '10240';		$configSkGolDarah['allowed_types'] = 'pdf|jpg|png|JPG|JPEG|PNG|jpeg|doc|docx';		$configSkGolDarah['overwrite'] = TRUE;		$configSkGolDarah['remove_spaces'] = TRUE;		$configSkGolDarah["file_name"]=$ubah; //dengan eekstensi		$sk_gol_darah=$ubah.".".$ekstensi;		$this->load->library('upload', $configSkGolDarah);		$this->upload->initialize($configSkGolDarah);		$this->load->model('Form_Model','',TRUE);		$this->Form_Model->insert_sk_gol_darah($nim,$sk_gol_darah);		if (!$this->upload->do_upload('sk_gol_darah')) {			$sk_gol_darah_sukses=FALSE;		} else {			$sk_gol_darah_sukses=TRUE;		}	}					//upload SK Cuti Kerja	if (isset($_FILES['sk_cuti_kerja']['name']) && $_FILES['sk_cuti_kerja']['name'] != '') {		unset($config);		$nim =$_SESSION['data']['id_user'];		$pemilik=$nim;		//$pemisah="_";		$bersih=$_FILES['sk_cuti_kerja']['name'];		$nm=str_replace(" ","_","$bersih");		$pisah=explode(".",$nm);		$nama_murni=$pisah[0];		$ekstensi=$pisah[1];		$sp="_";		//$ubah=$pemilik.$sp.$nama_murni; //tanpa ekstensi		$ubah=$pemilik;		//path where to save the SkCutiKerja		$configSkCutiKerja['upload_path'] = './uploads/sk_cuti_kerja';		$configSkCutiKerja['max_size'] = '10240';		$configSkCutiKerja['allowed_types'] = 'pdf|jpg|png|JPG|JPEG|PNG|jpeg|doc|docx';		$configSkCutiKerja['overwrite'] = TRUE;		$configSkCutiKerja['remove_spaces'] = TRUE;		$configSkCutiKerja["file_name"]=$ubah; //dengan eekstensi		$sk_cuti_kerja=$ubah.".".$ekstensi;		$this->load->library('upload', $configSkCutiKerja);		$this->upload->initialize($configSkCutiKerja);		$this->load->model('Form_Model','',TRUE);		$this->Form_Model->insert_sk_cuti_kerja($nim,$sk_cuti_kerja);		if (!$this->upload->do_upload('sk_cuti_kerja')) {			$sk_cuti_kerja_sukses = FALSE;		}else {			$sk_cuti_kerja_sukses = TRUE;		}	}			//upload SK Tidak Hamil	if (isset($_FILES['sk_tidak_hamil']['name']) && $_FILES['sk_tidak_hamil']['name'] != '') {		unset($config);		$nim =$_SESSION['data']['id_user'];		$pemilik=$nim;		//$pemisah="_";		$bersih=$_FILES['sk_tidak_hamil']['name'];		$nm=str_replace(" ","_","$bersih");		$pisah=explode(".",$nm);		$nama_murni=$pisah[0];		$ekstensi=$pisah[1];		$sp="_";		//$ubah=$pemilik.$sp.$nama_murni; //tanpa ekstensi		$ubah=$pemilik;		//path where to save the SkTidakHamil		$configSkTidakHamil['upload_path'] = './uploads/sk_tidak_hamil';		$configSkTidakHamil['max_size'] = '10240';		$configSkTidakHamil['allowed_types'] = 'pdf|jpg|png|JPG|JPEG|PNG|jpeg|doc|docx';		$configSkTidakHamil['overwrite'] = TRUE;		$configSkTidakHamil['remove_spaces'] = TRUE;		$configSkTidakHamil["file_name"]=$ubah; //dengan eekstensi		$sk_tidak_hamil=$ubah.".".$ekstensi;		$this->load->library('upload', $configSkTidakHamil);		$this->upload->initialize($configSkTidakHamil);		$this->load->model('Form_Model','',TRUE);		$this->Form_Model->insert_sk_tidak_hamil($nim,$sk_tidak_hamil);		if (!$this->upload->do_upload('sk_tidak_hamil')) {			$sk_tidak_hamil_sukses=FALSE;		} else {			$sk_tidak_hamil_sukses=TRUE;		}	}					if (($sk_sehat_sukses==FALSE) ||($sk_gol_darah_sukses==FALSE)||($foto_sukses==FALSE)){				?>		<script type="text/javascript">					alert("Jenis File yang anda Upload tidak diijinkan, gunakan file png,jpg,jpeg untuk foto dan jpg, pdf,doc,docx untuk document..!!!");								</script>		<?php		echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php/form/upload'>";		}else {		$nim =$_SESSION['data']['id_user'];		$this->load->model('Form_Model','',TRUE);		$this->Form_Model->ganti_sudah_jadi_2($nim);		echo "<meta http-equiv='refresh' content='0; url=".base_url()."index.php/mahasiswa'>";			}					}}?>